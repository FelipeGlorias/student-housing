
{% extends "base.html" %}

{% block title %}{{ listing.title }} - SJSU Housing{% endblock %}

{% block content %}
<div class="row">
    
    <div class="col-md-8">
        <h2 class="mb-2">{{ listing.title }}</h2>
        <p class="text-muted mb-4">
            <i class="fas fa-map-marker-alt"></i> {{ listing.address }}, {{ listing.city }}, {{ listing.state }}
        </p>

        
        <div class="card mb-4 shadow-sm">
            <div class="card-body">
                <h4>Description</h4>
                <p>{{ listing.description or "No description provided." }}</p>

                <hr>
                <h4>Details</h4>
                <ul class="list-unstyled">
                    <li><i class="fas fa-bed"></i> <strong>Bedrooms:</strong> {{ listing.bedrooms }}</li>
                    <li><i class="fas fa-bath"></i> <strong>Bathrooms:</strong> {{ listing.bathrooms }}</li>
                    <li><i class="fas fa-ruler-combined"></i> <strong>Square Feet:</strong> {{ listing.square_feet or 'N/A' }}</li>
                    <li><i class="fas fa-calendar"></i> <strong>Available From:</strong> {{ listing.available_from }}</li>
                </ul>

                {% if listing.amenities %}
                <h4>Amenities</h4>
                <p>{{ listing.amenities }}</p>
                {% endif %}
            </div>
        </div>

        
        <div class="card shadow-sm mb-4">
            <div class="card-header"><h5>Reviews ({{ reviews|length }})</h5></div>
            <div class="card-body">
                {% if reviews %}
                    {% for review in reviews %}
                    <div class="mb-3">
                        <strong>{{ review.reviewer.username }}</strong>
                        <span class="text-warning">{{ '★' * review.rating }}{{ '☆' * (5 - review.rating) }}</span>
                        <p>{{ review.comment }}</p>
                        <small class="text-muted">{{ review.created_at.strftime('%B %d, %Y') }}</small>
                    </div>
                    {% if not loop.last %}<hr>{% endif %}
                    {% endfor %}
                {% else %}
                    <p>No reviews yet.</p>
                {% endif %}

                {% if current_user.is_authenticated and review_form %}
                <hr>
                <h
